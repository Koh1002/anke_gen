# 🎭 仮想インタビューシステム

CPGメーカー向けの仮想インタビューシステムです。調査会社を使わずに、AIが生成した仮想ペルソナとのインタビューを通じてマーケティング調査を実施できます。

## 🌟 主な機能

### 1. 調査要件の収集
- テンプレート質問による効率的な要件ヒアリング
- 商品カテゴリ、ターゲット層、調査目的の明確化
- 自由記述による追加要件の収集

### 2. 仮想ペルソナ生成
- 調査要件に基づいた最適なペルソナの自動生成
- 年齢、性別、職業、ライフスタイル、購買行動などの詳細設定
- 背景ストーリーによるリアルな人物像の構築

### 3. インタビュー実施
#### チャットインタビュー
- 1人のペルソナとの自由な会話
- リアルタイムでの質問と回答
- ペルソナの性格や背景を反映した自然な応答

#### 固定質問インタビュー
- 複数のペルソナへの一括質問
- 定量的な回答データの収集
- 効率的な大規模調査の実施

### 4. 結果分析・サマリー
- 定量的な人口統計分析
- 主要洞察の自動抽出
- 具体的な推奨事項の提案
- グラフによる視覚化

### 5. データ出力
- Excelファイルでの詳細レポート出力
- 複数シートによる整理された情報
- ダウンロード機能

## 🚀 セットアップ

### 必要な環境
- Python 3.8以上
- OpenAI API キー

### 方法1: ローカル開発環境

#### インストール

1. リポジトリのクローン
```bash
git clone <repository-url>
cd interviewer_tool
```

2. 依存関係のインストール
```bash
pip install -r requirements.txt
```

3. 環境変数の設定
```bash
# .envファイルを作成
echo "OPENAI_API_KEY=your_openai_api_key_here" > .env
```

#### 起動方法

1. バックエンドサーバーの起動
```bash
python app.py
```

2. フロントエンドの起動（別ターミナル）
```bash
streamlit run frontend.py
```

3. ブラウザでアクセス
```
http://localhost:8501
```

### 方法2: Streamlit Cloudでのデプロイ

#### 1. GitHubリポジトリの準備
- このリポジトリをGitHubにプッシュ
- `.env`ファイルは`.gitignore`で除外済み

#### 2. Streamlit Cloudでの設定
1. [Streamlit Cloud](https://streamlit.io/cloud)にアクセス
2. GitHubアカウントでログイン
3. 「New app」をクリック
4. リポジトリを選択: `Koh1002/anke_gen`
5. メインファイル: `frontend.py`
6. デプロイ

#### 3. 環境変数の設定
1. Streamlit Cloudのダッシュボードでアプリを選択
2. 「Settings」→「Secrets」をクリック
3. 以下の内容を追加:
```toml
OPENAI_API_KEY = "your_openai_api_key_here"
```

#### 4. アプリの起動
- 設定完了後、アプリが自動的に起動
- サイドバーでAPIキーの設定状況を確認可能

## 📋 使用方法

### ステップ1: 調査要件の収集
1. システムにアクセス
2. テンプレート質問に回答
3. 商品カテゴリ、ターゲット層、調査目的を入力
4. 追加要件を自由記述

### ステップ2: ペルソナ生成
1. 生成するペルソナ数を選択（3-10人）
2. 「ペルソナを生成」ボタンをクリック
3. 生成されたペルソナの詳細を確認

### ステップ3: インタビュー実施
#### チャットインタビュー
1. 「チャットインタビュー」を選択
2. インタビューするペルソナを選択
3. 「チャットセッションを開始」をクリック
4. 自由に質問を入力して会話

#### 固定質問インタビュー
1. 「固定質問インタビュー」を選択
2. インタビューするペルソナを複数選択
3. 質問を入力（1行に1つの質問）
4. 「インタビューを実行」をクリック

### ステップ4: 結果サマリー
1. 「結果サマリーを生成」をクリック
2. 定量的分析とグラフを確認
3. 主要洞察と推奨事項を確認
4. Excelファイルを出力・ダウンロード

## 🏗️ アーキテクチャ

### バックエンド (FastAPI)
- `app.py`: メインAPIサーバー
- `main.py`: 仮想インタビューシステムのコアロジック
- `utils.py`: ユーティリティ関数

### フロントエンド (Streamlit)
- `frontend.py`: メインUIアプリケーション

### 主要クラス
- `VirtualInterviewSystem`: メインシステムクラス
- `SurveyRequirementsCollector`: 調査要件収集
- `VirtualPersonaGenerator`: ペルソナ生成
- `ChatInterviewManager`: チャットインタビュー管理
- `FixedQuestionInterviewManager`: 固定質問インタビュー管理
- `InterviewAnalyzer`: 結果分析
- `ChartGenerator`: グラフ生成

## 📊 データモデル

### SurveyRequirements
- 商品カテゴリ、ターゲット層、調査目的など

### VirtualPersona
- ID、名前、年齢、性別、職業、ライフスタイルなど

### InterviewSession
- チャットセッション情報

### FixedQuestionInterview
- 固定質問インタビュー結果

### InterviewSummary
- 分析結果とサマリー

## 🔧 カスタマイズ

### ペルソナ生成の調整
`main.py`の`VirtualPersonaGenerator`クラスで、ペルソナ生成のプロンプトやパラメータを調整できます。

### インタビュー質問のテンプレート
`app.py`の`get_template_questions`エンドポイントで、調査要件収集の質問をカスタマイズできます。

### グラフの設定
`utils.py`の`create_demographics_chart`関数で、グラフのスタイルや種類を変更できます。

## 📈 出力例

### Excelファイル構成
- 調査要件シート
- ペルソナ情報シート
- チャットインタビューシート
- 固定質問インタビューシート
- サマリーシート
- 主要洞察シート
- 推奨事項シート

### グラフ
- 年齢分布（棒グラフ）
- 性別分布（円グラフ）

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します。

## 📄 ライセンス

MIT License

## 📞 サポート

問題や質問がある場合は、イシューを作成してください。
